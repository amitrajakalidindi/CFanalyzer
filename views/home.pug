doctype html
html 
    head
        meta(charset='utf-8')
        meta(name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no')
        meta(http-equiv='x-ua-compatible' content='ie=edge')

        link(rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css')
        script(src='https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js')
        script(src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js')
        script(src='https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js')
        script(src='https://kit.fontawesome.com/a076d05399.js')
        script(src='https://cdn.jsdelivr.net/npm/chart.js@2.8.0')
        title='CFanalyzer'
    body(style="font-family: 'Inter var',sans-serif")
        nav(class='navbar navbar-expand-lg fixed-top d-flex justify-content-between' style='background-color: #F5F5F5')
            div
                a(class='navbar-brand text-dark' href='#')
                    h3='CFanalyzer'
            div
                button(class='navbar-toggler' type='button' data-toggle='collapse' data-target='#collapsibleNavbar')
                    span(class='navbar-toggler-icon')
                div(class='collapse navbar-collapse' id='collapsibleNavbar')
                    ul(class='navbar-nav')
                        if(username)
                            li(class='nav-item dropdown')
                                h5
                                    a(class='nav-link dropdown-toggle text-dark' href=`/user/${username}` id='navbardrop' data-toggle='dropdown')=username
                                    div(class='dropdown-menu dropdown-menu-right')
                                        a(class='dropdown-item' href='/signout')='Sign out'
                        else
                            li(class='nav-item')
                                a(href='/signin' style='font-size:22px; color:black; text-decoration:none')='Sign in'
        
        div(class="chart-container" style="margin-top:75px; padding:5px 5px 5px 5px;  height:300px; width:500px; display:inline-block")
            canvas(id='verdictChart')
        div(class="chart-container" style="margin-top:75px; padding:5px 5px 5px 5px;  height:300px; width:500px; display:inline-block")
            canvas(id='contestChart')

        script.
            var ctx = document.getElementById('verdictChart').getContext('2d');
            var verdictChart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Accepted', 'Compilation Error', 'Runtime Error', 'Wrong Answer', 'Time Limit Exceeded', 'Memory Limit Exceeded'],
                    datasets: [{
                        label: '# of Votes',
                        data: Array(#{problemVerdicts}),
                        backgroundColor: [
                            'rgba(75, 192, 192, 0.5)',
                            'rgba(54, 162, 235, 0.5)',
                            'rgba(255, 206, 86, 0.5)',
                            'rgba(255, 99, 132, 0.5)',
                            'rgba(153, 102, 255, 0.5)',
                            'rgba(255, 159, 64, 0.5)'
                        ],
                        borderColor: [
                            'rgba(75, 192, 192, 0.5)',
                            'rgba(54, 162, 235, 0.5)',
                            'rgba(255, 206, 86, 0.5)',
                            'rgba(255, 99, 132, 0.5)',
                            'rgba(153, 102, 255, 0.5)',
                            'rgba(255, 159, 64, 0.5)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        yAxes: [{
                            ticks: {
                                beginAtZero: true
                            }
                        }]
                    }
                }
            });     
        script.
            var ctx = document.getElementById('contestChart').getContext('2d');
            var contestChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['0', '1', '2', '3', '4', '5','6','7','8'],
                    datasets: [{
                        label: 'Problems solved in a contest',
                        data: Array(#{problemscount}),
                        backgroundColor: [
                            'rgba(75, 192, 192, 0.5)',
                            'rgba(54, 162, 235, 0.5)',
                            'rgba(255, 206, 86, 0.5)',
                            'rgba(255, 99, 132, 0.5)',
                            'rgba(153, 102, 255, 0.5)',
                            'rgba(255, 159, 64, 0.5)'
                        ],
                        borderColor: [
                            'rgba(75, 192, 192, 0.5)',
                            'rgba(54, 162, 235, 0.5)',
                            'rgba(255, 206, 86, 0.5)',
                            'rgba(255, 99, 132, 0.5)',
                            'rgba(153, 102, 255, 0.5)',
                            'rgba(255, 159, 64, 0.5)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        yAxes: [{
                            ticks: {
                                beginAtZero: true
                            }
                        }]
                    }
                }
            });

        
    